<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ - SODmAX Pro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #0a0f1c 0%, #121828 100%); color: white; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .logo { font-size: 24px; font-weight: bold; background: linear-gradient(135deg, #0066FF, #00D4AA); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        nav a { color: #94A3B8; text-decoration: none; margin-right: 20px; transition: 0.3s; }
        nav a:hover { color: #0066FF; }
        .btn { background: #0066FF; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
        
        .missions-header { text-align: center; margin: 40px 0; }
        .missions-header h1 { font-size: 36px; margin-bottom: 10px; background: linear-gradient(135deg, #0066FF, #FF6B35); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .missions-header p { color: #94A3B8; font-size: 18px; }
        
        .stats-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-card { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
        .stat-card h3 { color: #00D4AA; margin-bottom: 15px; font-size: 18px; }
        .stat-value { font-size: 32px; font-weight: bold; margin: 10px 0; }
        
        .missions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; margin-top: 30px; }
        .mission-card { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .mission-card:hover { border-color: #0066FF; transform: translateY(-5px); }
        .mission-card.completed { border-color: #00D4AA; background: rgba(0,212,170,0.05); }
        .mission-card.active { border-color: #FF6B35; background: rgba(255,107,53,0.05); }
        
        .mission-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .mission-icon { font-size: 32px; }
        .mission-title { font-size: 20px; font-weight: bold; }
        .mission-status { padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .status-active { background: #FF6B35; }
        .status-completed { background: #00D4AA; }
        .status-locked { background: #94A3B8; }
        
        .mission-description { color: #94A3B8; margin: 15px 0; line-height: 1.6; }
        .mission-progress { margin: 20px 0; }
        .progress-bar { height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #0066FF, #00D4AA); border-radius: 5px; transition: width 0.5s; }
        .progress-text { display: flex; justify-content: space-between; margin-top: 5px; font-size: 12px; color: #94A3B8; }
        
        .mission-reward { display: flex; align-items: center; gap: 10px; margin: 20px 0; }
        .reward-icon { font-size: 24px; }
        .reward-amount { font-size: 20px; font-weight: bold; }
        .reward-sod { color: #0066FF; }
        .reward-usdt { color: #00D4AA; }
        
        .mission-action { margin-top: 20px; }
        .action-btn { width: 100%; padding: 15px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-claim { background: #00D4AA; color: white; }
        .btn-claim:hover { background: #00B894; }
        .btn-disabled { background: #94A3B8; color: white; cursor: not-allowed; }
        
        @media (max-width: 768px) {
            .missions-grid { grid-template-columns: 1fr; }
            .stats-cards { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">SODmAX Missions</div>
            <nav>
                <a href="index.html">Ø¨Ø§Ø²ÛŒ Ø§ØµÙ„ÛŒ</a>
                <a href="dashboard.html">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
                <a href="leaderboard.html">Ù„ÛŒØ¯Ø±Ø¨Ø±Ø¯</a>
                <!-- Ù„ÛŒÙ†Ú© Ù…Ø¯ÛŒØ±ÛŒØª -->
                <a href="admin.html" id="adminLink" style="display: none; background: rgba(148,163,184,0.3); padding: 6px 12px; border-radius: 6px;">
                    <i class="fas fa-user-shield"></i>
                    Ù…Ø¯ÛŒØ±ÛŒØª
                </a>
                <button class="btn" onclick="goToGame()">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ</button>
            </nav>
        </header>
        
        <div class="missions-header">
            <h1>ğŸ¯ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡</h1>
            <p>Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯ØŒ Ù¾Ø§Ø¯Ø§Ø´ Ø¨Ú¯ÛŒØ±ÛŒØ¯ Ùˆ Ù¾ÛŒØ´Ø±ÙØª Ú©Ù†ÛŒØ¯!</p>
        </div>
        
        <div class="stats-cards">
            <div class="stat-card">
                <h3>Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²</h3>
                <div class="stat-value" id="todayMissions">Û°/Ûµ</div>
                <p>ØªØ§Ú©Ù†ÙˆÙ† ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</p>
            </div>
            <div class="stat-card">
                <h3>Ù¾Ø§Ø¯Ø§Ø´ Ø§Ù…Ø±ÙˆØ²</h3>
                <div class="stat-value" id="todayRewards">Û° SOD</div>
                <p>Ø¬Ù…Ø¹ Ù¾Ø§Ø¯Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ</p>
            </div>
            <div class="stat-card">
                <h3>Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú©Ù„</h3>
                <div class="stat-value" id="totalMissions">Û°</div>
                <p>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡ Ø¯Ø± Ú©Ù„ Ø¯ÙˆØ±Ù‡</p>
            </div>
            <div class="stat-card">
                <h3>Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡</h3>
                <div class="stat-value" id="timeRemaining">Û²Û³:ÛµÛ¹</div>
                <p>ØªØ§ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§</p>
            </div>
        </div>
        
        <div class="missions-grid" id="missionsGrid">
            <!-- Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>
        
        <div style="text-align: center; margin: 50px 0; color: #94A3B8;">
            <h3>ğŸ† Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡</h3>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 24px;">ğŸ¥‡</div>
                    <div>Û±Û° Ù…Ø£Ù…ÙˆØ±ÛŒØª Ù…ØªÙˆØ§Ù„ÛŒ</div>
                    <small>Ù¾Ø§Ø¯Ø§Ø´: Û°.Û°Ûµ USDT</small>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 24px;">âš¡</div>
                    <div>Ûµ Ù…Ø£Ù…ÙˆØ±ÛŒØª Ø¯Ø± ÛŒÚ© Ø±ÙˆØ²</div>
                    <small>Ù¾Ø§Ø¯Ø§Ø´: Û±Û°Û°K SOD</small>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 24px;">ğŸŒŸ</div>
                    <div>ØªÙ…Ø§Ù… Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù‡ÙØªÙ‡</div>
                    <small>Ù¾Ø§Ø¯Ø§Ø´: NFT ÙˆÛŒÚ˜Ù‡</small>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¯Ù…ÛŒÙ† ====================
        
        // ØªØ´Ø®ÛŒØµ Ø§Ø¯Ù…ÛŒÙ† Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒÙ†Ú© Ù…Ø¯ÛŒØ±ÛŒØª
        function checkAdminAccess() {
            try {
                const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
                if (userData.email === "hamyarhf@gmail.com") {
                    document.getElementById('adminLink').style.display = 'flex';
                }
            } catch (e) {
                console.log('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± ØªØ´Ø®ÛŒØµ Ø§Ø¯Ù…ÛŒÙ†:', e);
            }
        }

        // ==================== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ ====================
        
        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        const missionsData = [
            {
                id: 1,
                title: "Ø§ÙˆÙ„ÛŒÙ† Ù‚Ø¯Ù…",
                icon: "ğŸ‘£",
                description: "Ø§ÙˆÙ„ÛŒÙ† Ú©Ù„ÛŒÚ© Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯",
                type: "click",
                target: 1,
                current: 0,
                reward: { type: "SOD", amount: 1000 },
                status: "active"
            },
            {
                id: 2,
                title: "Ø§Ø³ØªØ®Ø±Ø§Ø¬â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…Ø¨ØªØ¯ÛŒ",
                icon: "â›ï¸",
                description: "Û±Û°Û° Ú©Ù„ÛŒÚ© Ø¯Ø± Ø±ÙˆØ² Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯",
                type: "click",
                target: 100,
                current: 0,
                reward: { type: "SOD", amount: 5000 },
                status: "active"
            },
            {
                id: 3,
                title: "Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ",
                icon: "â­",
                description: "Ø¨Ù‡ Ø³Ø·Ø­ Û³ Ø¨Ø±Ø³ÛŒØ¯",
                type: "level",
                target: 3,
                current: 1,
                reward: { type: "SOD", amount: 10000 },
                status: "active"
            },
            {
                id: 4,
                title: "Ø§Ø³ØªØ®Ø±Ø§Ø¬â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø·Ù„Ø§ÛŒÛŒ",
                icon: "ğŸ’°",
                description: "Û±,Û°Û°Û°,Û°Û°Û° SOD Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù†ÛŒØ¯",
                type: "mining",
                target: 1000000,
                current: 0,
                reward: { type: "USDT", amount: 0.01 },
                status: "active"
            },
            {
                id: 5,
                title: "Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ø§Ù„",
                icon: "ğŸ”¥",
                description: "Ûµ Ù…Ø£Ù…ÙˆØ±ÛŒØª Ø±Ø§ Ø¯Ø± ÛŒÚ© Ø±ÙˆØ² Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯",
                type: "missions",
                target: 5,
                current: 0,
                reward: { type: "USDT", amount: 0.05 },
                status: "active"
            }
        ];
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        function loadMissions() {
            const missionsGrid = document.getElementById('missionsGrid');
            
            // Ø¢Ù¾Ø¯ÛŒØª Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ Ø§Ø² localStorage
            updateMissionsProgress();
            
            let completedCount = 0;
            let totalRewards = 0;
            
            // Ø³Ø§Ø®Øª HTML Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
            let html = '';
            missionsData.forEach(mission => {
                const progress = Math.min((mission.current / mission.target) * 100, 100);
                const isCompleted = mission.current >= mission.target;
                const statusClass = isCompleted ? 'completed' : 'active';
                const statusText = isCompleted ? 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡' : 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…';
                
                if (isCompleted) completedCount++;
                if (isCompleted) totalRewards += mission.reward.amount;
                
                html += `
                    <div class="mission-card ${statusClass}">
                        <div class="mission-header">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div class="mission-icon">${mission.icon}</div>
                                <div class="mission-title">${mission.title}</div>
                            </div>
                            <div class="mission-status ${isCompleted ? 'status-completed' : 'status-active'}">
                                ${statusText}
                            </div>
                        </div>
                        
                        <div class="mission-description">${mission.description}</div>
                        
                        <div class="mission-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <div class="progress-text">
                                <span>${formatNumber(mission.current)}</span>
                                <span>${formatNumber(mission.target)}</span>
                            </div>
                        </div>
                        
                        <div class="mission-reward">
                            <div class="reward-icon">${mission.reward.type === 'SOD' ? 'ğŸª™' : 'ğŸ’²'}</div>
                            <div class="reward-amount ${mission.reward.type === 'SOD' ? 'reward-sod' : 'reward-usdt'}">
                                ${formatNumber(mission.reward.amount)} ${mission.reward.type}
                            </div>
                        </div>
                        
                        <div class="mission-action">
                            <button class="action-btn ${isCompleted ? 'btn-claim' : 'btn-disabled'}" 
                                    ${isCompleted ? 'onclick="claimReward(' + mission.id + ')"' : 'disabled'}>
                                ${isCompleted ? 'ğŸ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´' : 'Ø¯Ø± Ø­Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØª...'}
                            </button>
                        </div>
                    </div>
                `;
            });
            
            missionsGrid.innerHTML = html;
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±
            document.getElementById('todayMissions').textContent = `${completedCount}/${missionsData.length}`;
            document.getElementById('todayRewards').textContent = `${formatNumber(totalRewards)} SOD`;
            document.getElementById('totalMissions').textContent = completedCount;
            
            // ØªØ§ÛŒÙ…Ø± Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
            updateResetTimer();
        }
        
        // Ø¢Ù¾Ø¯ÛŒØª Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        function updateMissionsProgress() {
            try {
                const gameData = JSON.parse(localStorage.getItem('sodmaxGameData') || '{}');
                const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
                
                // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ† Ù†Ú©Ø±Ø¯Ù‡ØŒ Ø¨Ø±Ùˆ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
                if (!userData.email) {
                    window.location.href = 'index.html';
                    return;
                }
                
                // Ù…Ø£Ù…ÙˆØ±ÛŒØª Û±: Ø§ÙˆÙ„ÛŒÙ† Ú©Ù„ÛŒÚ©
                if (gameData.sodBalance > 0) {
                    missionsData[0].current = 1;
                }
                
                // Ù…Ø£Ù…ÙˆØ±ÛŒØª Û²: Û±Û°Û° Ú©Ù„ÛŒÚ©
                missionsData[1].current = Math.min(gameData.todayEarnings || 0, 100);
                
                // Ù…Ø£Ù…ÙˆØ±ÛŒØª Û³: Ø³Ø·Ø­ Û³
                missionsData[2].current = gameData.userLevel || 1;
                
                // Ù…Ø£Ù…ÙˆØ±ÛŒØª Û´: Û±M SOD Ø§Ø³ØªØ®Ø±Ø§Ø¬
                missionsData[3].current = gameData.totalMined || 0;
                
                // Ù…Ø£Ù…ÙˆØ±ÛŒØª Ûµ: Ûµ Ù…Ø£Ù…ÙˆØ±ÛŒØª
                const completedMissions = missionsData.filter(m => m.current >= m.target).length;
                missionsData[4].current = completedMissions;
                
                // Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
                saveMissionsProgress();
                
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ø¯ÛŒØª Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§:', error);
            }
        }
        
        // Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        function saveMissionsProgress() {
            try {
                const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
                if (userData.email) {
                    localStorage.setItem('sodmaxMissions_' + userData.email, JSON.stringify(missionsData));
                }
            } catch (e) {
                console.log('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§:', e);
            }
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        function loadMissionsProgress() {
            try {
                const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
                if (userData.email) {
                    const savedMissions = localStorage.getItem('sodmaxMissions_' + userData.email);
                    if (savedMissions) {
                        const loadedMissions = JSON.parse(savedMissions);
                        loadedMissions.forEach((loadedMission, index) => {
                            if (missionsData[index]) {
                                missionsData[index].current = loadedMission.current || 0;
                            }
                        });
                    }
                }
            } catch (e) {
                console.log('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§:', e);
            }
        }
        
        // Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´
        function claimReward(missionId) {
            const mission = missionsData.find(m => m.id === missionId);
            if (!mission || mission.current < mission.target) return;
            
            // Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´ Ø¯Ø± Ø¨Ø§Ø²ÛŒ
            const gameData = JSON.parse(localStorage.getItem('sodmaxGameData') || '{}');
            const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
            
            if (mission.reward.type === 'SOD') {
                gameData.sodBalance = (gameData.sodBalance || 0) + mission.reward.amount;
                gameData.totalMined = (gameData.totalMined || 0) + mission.reward.amount;
            } else {
                gameData.usdtBalance = (gameData.usdtBalance || 0) + mission.reward.amount;
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø§Ø²ÛŒ
            localStorage.setItem('sodmaxGameData', JSON.stringify(gameData));
            
            // Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¯Ø± Ø³Ø§Ø®ØªØ§Ø± Ø¬Ø¯ÛŒØ¯ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†
            if (userData.email) {
                localStorage.setItem('sodmaxGame_' + userData.email, JSON.stringify(gameData));
            }
            
            // Ø¹Ù„Ø§Ù…Øª Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØª Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡
            mission.status = "claimed";
            
            const rewardText = mission.reward.type === 'SOD' 
                ? `${formatNumber(mission.reward.amount)} SOD`
                : `${mission.reward.amount} USDT`;
            
            alert(`ğŸ‰ Ù¾Ø§Ø¯Ø§Ø´ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯!\n\nÙ…Ø£Ù…ÙˆØ±ÛŒØª: ${mission.title}\nÙ¾Ø§Ø¯Ø§Ø´: ${rewardText}`);
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡
            const button = event.target;
            button.textContent = 'âœ… Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯';
            button.classList.remove('btn-claim');
            button.classList.add('btn-disabled');
            button.disabled = true;
            
            // Ø¢Ù¾Ø¯ÛŒØª Ø¢Ù…Ø§Ø±
            loadMissions();
        }
        
        // ØªØ§ÛŒÙ…Ø± Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
        function updateResetTimer() {
            const now = new Date();
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const diff = tomorrow - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('timeRemaining').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }
        
        // ÙØ±Ù…Øª Ø§Ø¹Ø¯Ø§Ø¯
        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }
        
        // Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ
        function goToGame() {
            window.location.href = 'index.html';
        }
        
        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ====================
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        window.addEventListener('DOMContentLoaded', function() {
            // Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ÛŒÙ†
            const userData = JSON.parse(localStorage.getItem('sodmaxUserData') || '{}');
            if (!userData.email) {
                window.location.href = 'index.html';
                return;
            }
            
            loadMissionsProgress();
            loadMissions();
            checkAdminAccess();
            
            // Ø¢Ù¾Ø¯ÛŒØª ØªØ§ÛŒÙ…Ø± Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡
            setInterval(updateResetTimer, 60000);
            
            // Ø¢Ù¾Ø¯ÛŒØª Ù¾ÛŒØ´Ø±ÙØª Ù‡Ø± Û³Û° Ø«Ø§Ù†ÛŒÙ‡
            setInterval(() => {
                updateMissionsProgress();
                loadMissions();
            }, 30000);
        });
    </script>
</body>
</html>
